<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fitcheck — Select Payment Method</title>
  <link rel="stylesheet" href="/css/PaymentMethod.css" />
</head>
<body>
  <header>
        <div class="brand-container">
            <img alt="logo" class="logo" src="~/images_fitcheck/LOGO.png">
            <h1 class="brand">FITCHECK</h1>
        </div>
        <nav class="navbar">
            <a href="">Home</a>
            <a href="Membership(user).cshtml">Membership</a>
            <a href="">Classes</a>
            <a href="LogInPage.cshtml">Log out</a>
        </nav>
    </header>

<main class="container">
    <h1 class="page-title">Select Payment Method</h1>
    <section class="grid">
        <a class="card" href="#" aria-label="Pay with Mastercard" onclick="showPaymentForm('mastercard')">
            <img src="~/images_fitcheck/Mastercard.png" alt="Mastercard" width="306" height="228"/>
        </a>
        <a class="card" href="#" aria-label="Pay with GCash" onclick="showPaymentForm('gcash')">
            <img src="~/images_fitcheck/Gcash.png" alt="GCash" width="306" height="228"/>
        </a>
        <a class="card" href="#" aria-label="Pay with Pay Cash" onclick="showPaymentForm('paycash')">
            <img src="~/images_fitcheck/Paycash.png" alt="Pay Cash" width="306" height="228"/>
        </a>
    </section>
</main>

<!-- Modal for Payment Form -->
<div id="paymentModal" class="payment-modal">
    <div class="payment-modal-content">
        <span class="close-btn" onclick="closePaymentForm()">&times;</span>
        
        <h2>Payment Details</h2>
        <form id="paymentForm" action="#">
            <div class="form-row">
                <div class="input-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" name="firstName" required>
                </div>
                <div class="input-group">
                    <label for="surname">Surname</label>
                    <input type="text" id="surname" name="surname" required>
                </div>
            </div>

            <!-- Dynamic Fields Based on Payment Method -->
            <div class="form-row" id="dynamicFields"></div>
            
            <!-- Membership Plan and Price -->
            <div class="form-row">
                <label>Membership Plan: </label>
                <span id="membershipPlanValue"></span> <!-- Plan will be shown here -->
            </div>
            <div class="form-row">
                <label>Price: </label>
                <span id="membershipPriceValue"></span> <!-- Price will be shown here -->
            </div>

            <!-- No Refund Note -->
            <div class="form-row">
                <p style="color: red; font-size: 14px; text-align: center;">Note: There are no refunds for payments made.</p>
            </div>

            <div class="form-row">
                <button type="submit" class="pay-btn" onclick="showThankYouMessage(event)">Pay Now</button>
            </div>

        </form>
    </div>
</div>

<!-- Thank You Message Modal -->
<div id="thankYouModal" class="payment-modal">
    <div class="payment-modal-content">
        <span class="close-btn" onclick="closeThankYouMessage()">&times;</span>
        
        <h2>Thank You for Subscribing!</h2>
        <p>Your payment has been successfully processed. We appreciate your subscription to FitCheck!</p>
    </div>
</div>

<script>
    // Function to get query parameters from the URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // When the page loads, set the membership plan and price based on the URL parameter
    window.onload = function() {
        const plan = getQueryParam('plan');
        const price = getQueryParam('price');  // Added price parameter
        
        if (plan && price) {
            // Update the Membership Plan and Price in the form
            document.getElementById('membershipPlanValue').textContent = plan;
            document.getElementById('membershipPriceValue').textContent = '₱ ' + price;  // Display the price with "₱"
        }
    };

    function showPaymentForm(paymentMethod) {
        const modal = document.getElementById("paymentModal");
        modal.style.display = "block";
        
        const dynamicFields = document.getElementById("dynamicFields");
        
        if (paymentMethod === 'mastercard') {
            dynamicFields.innerHTML = `
                <div class="form-row">
                    <div class="input-group">
                        <label for="cardNumber">Card Number</label>
                        <input type="text" id="cardNumber" name="cardNumber" required>
                    </div>
                    <div class="input-group">
                        <label for="cardHolderName">Cardholder Name</label>
                        <input type="text" id="cardHolderName" name="cardHolderName" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" name="cvv" required>
                    </div>
                    <div class="input-group">
                        <label for="validity">Validity</label>
                        <input type="text" id="validity" name="validity" required>
                    </div>
                </div>
            `;
        } else if (paymentMethod === 'gcash') {
            dynamicFields.innerHTML = `
                <div class="form-row">
                    <div class="input-group">
                        <label for="accountNumber">Account Number</label>
                        <input type="text" id="accountNumber" name="accountNumber" required>
                    </div>
                </div>
            `;
        } else if (paymentMethod === 'paycash') {
            dynamicFields.innerHTML = `
                <div class="form-row">
                    <div class="input-group">
                        <label for="cellphoneNumber">Cellphone No. (+63)</label>
                        <input type="text" id="cellphoneNumber" name="cellphoneNumber" required>
                    </div>
                </div>
                <div class="form-row">
                    <label>Go to the nearest FitCheck branch to complete the payment.</label>
                </div>
            `;
        }
    }

    function closePaymentForm() {
        const modal = document.getElementById("paymentModal");
        modal.style.display = "none";
    }

    function showThankYouMessage(event) {
        event.preventDefault(); // Prevent the default form submission

        // Close the current payment form
        closePaymentForm();

        // Show the "Thank You" message
        const thankYouModal = document.getElementById("thankYouModal");
        thankYouModal.style.display = "block";
    }

    function closeThankYouMessage() {
        const thankYouModal = document.getElementById("thankYouModal");
        thankYouModal.style.display = "none";
    }
</script>

<link rel="stylesheet" href="/css/PaymentMethod.css">

<!-- FOOTER -->
<footer>
  <div class="footer-container">

    <!-- LEFT SIDE -->
    <div class="footer-left">
      <div class="footer-top">
        <img src="~/images_fitcheck/logo.png" alt="FitCheck Logo" class="footer-logo">
        <p class="footer-desc">
          Transform your body and mind at FitCheck Gym. 
          With state-of-the-art equipment, expert trainers, 
          and a supportive community, we’re here to help 
          you achieve your fitness goals.
        </p>
      </div>

      <div class="footer-bottom">
        <p class="follow-text">FOLLOW US</p>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </div>

    <!-- RIGHT SIDE -->
    <div class="footer-right">
      <p><i class="fas fa-map-marker-alt"></i> Street 1, Congressional Rd Caloocan City</p>
      <p><i class="fas fa-envelope"></i> info@fitcheckgym.com</p>
      <p><i class="fas fa-mobile-alt"></i> 09192344890 / 09365414587</p>
    </div>

  </div>
</footer>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</body>
</html>
